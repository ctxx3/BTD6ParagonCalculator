import{t as J,b as Y,c as Ge}from"../chunks/DUlgh7aH.js";import{m as de,n as fe,q as je,t as le,b as Ve,h as k,a as Ue,R as m,a7 as Ye,c as ze,r as _e,s as ge,d as Z,g as z,z as $e,e as Ee,f as Se,p as Fe,am as Q,D as Ie,an as Je,ac as Ke,ao as me,ap as Xe,aq as Ze,C as Qe,ar as We,L as er,as as rr,at as ar,x as tr,o as lr,au as sr,av as nr,aw as or,ax as ir,ay as vr,a1 as Ce,az as Ne,aA as cr,a2 as pe,aB as ur,j as dr,a0 as Le,I as fr,aa as W,aj as xe,u as _r,Z as _,$ as x,Y as ee,J as gr,ab as he,_ as g,M as mr}from"../chunks/C9xbu8T-.js";import{s as O}from"../chunks/kqATIUK2.js";import{i as pr}from"../chunks/Dm1OR7pT.js";import{o as xr}from"../chunks/BAzetmX0.js";let be=!1;function De(){be||(be=!0,document.addEventListener("reset",e=>{Promise.resolve().then(()=>{var r;if(!e.defaultPrevented)for(const a of e.target.elements)(r=a.__on_r)==null||r.call(a)})},{capture:!0}))}function hr(e){var r=je,a=le;de(null),fe(null);try{return e()}finally{de(r),fe(a)}}function ne(e,r,a,l=a){e.addEventListener(r,()=>hr(a));const t=e.__on_r;t?e.__on_r=()=>{t(),l(!0)}:e.__on_r=()=>l(!0),De()}function ye(e,r){return r}function br(e,r,a,l){for(var t=[],s=r.length,n=0;n<s;n++)Ze(r[n].e,t,!0);var u=s>0&&t.length===0&&a!==null;if(u){var v=a.parentNode;Qe(v),v.append(a),l.clear(),D(e,r[0].prev,r[s-1].next)}We(t,()=>{for(var i=0;i<s;i++){var o=r[i];u||(l.delete(o.k),D(e,o.prev,o.next)),er(o.e,!u)}})}function we(e,r,a,l,t,s=null){var n=e,u={flags:r,items:new Map,first:null};k&&Ue();var v=null,i=!1,o=Ye(()=>{var f=a();return lr(f)?f:f==null?[]:Ie(f)});Ve(()=>{var f=m(o),c=f.length;if(i&&c===0)return;i=c===0;let h=!1;if(k){var p=n.data===ze;p!==(c===0)&&(n=_e(),ge(n),Z(!1),h=!0)}if(k){for(var E=null,T,d=0;d<c;d++){if(z.nodeType===8&&z.data===$e){n=z,h=!0,Z(!1);break}var w=f[d],I=l(w,d);T=Pe(z,u,E,null,w,I,d,t,r,a),u.items.set(I,T),E=T}c>0&&ge(_e())}k||yr(f,u,n,t,r,l,a),s!==null&&(c===0?v?Ee(v):v=Se(()=>s(n)):v!==null&&Fe(v,()=>{v=null})),h&&Z(!0),m(o)}),k&&(n=z)}function yr(e,r,a,l,t,s,n){var u=e.length,v=r.items,i=r.first,o=i,f,c=null,h=[],p=[],E,T,d,w;for(w=0;w<u;w+=1){if(E=e[w],T=s(E,w),d=v.get(T),d===void 0){var I=o?o.e.nodes_start:a;c=Pe(I,r,c,c===null?r.first:c.next,E,T,w,l,t,n),v.set(T,c),h=[],p=[],o=c.next;continue}if(wr(d,E,w),(d.e.f&Q)!==0&&Ee(d.e),d!==o){if(f!==void 0&&f.has(d)){if(h.length<p.length){var C=p[0],M;c=C.prev;var H=h[0],B=h[h.length-1];for(M=0;M<h.length;M+=1)ke(h[M],C,a);for(M=0;M<p.length;M+=1)f.delete(p[M]);D(r,H.prev,B.next),D(r,c,H),D(r,B,C),o=C,c=B,w-=1,h=[],p=[]}else f.delete(d),ke(d,o,a),D(r,d.prev,d.next),D(r,d,c===null?r.first:c.next),D(r,c,d),c=d;continue}for(h=[],p=[];o!==null&&o.k!==T;)(o.e.f&Q)===0&&(f??(f=new Set)).add(o),p.push(o),o=o.next;if(o===null)continue;d=o}h.push(d),c=d,o=d.next}if(o!==null||f!==void 0){for(var q=f===void 0?[]:Ie(f);o!==null;)(o.e.f&Q)===0&&q.push(o),o=o.next;var F=q.length;if(F>0){var G=null;br(r,q,G,v)}}le.first=r.first&&r.first.e,le.last=c&&c.e}function wr(e,r,a,l){Je(e.v,r),e.i=a}function Pe(e,r,a,l,t,s,n,u,v,i){var o=(v&rr)!==0,f=(v&ar)===0,c=o?f?Ke(t):me(t):t,h=(v&Xe)===0?n:me(n),p={i:h,v:c,k:s,a:null,e:null,prev:a,next:l};try{return p.e=Se(()=>u(e,c,h,i),k),p.e.prev=a&&a.e,p.e.next=l&&l.e,a===null?r.first=p:(a.next=p,a.e.next=p.e),l!==null&&(l.prev=p,l.e.prev=p.e),p}finally{}}function ke(e,r,a){for(var l=e.next?e.next.e.nodes_start:a,t=r?r.e.nodes_start:a,s=e.e.nodes_start;s!==l;){var n=tr(s);t.before(s),s=n}}function D(e,r,a){r===null?e.first=a:(r.next=a,r.e.next=a&&a.e),a!==null&&(a.prev=r,a.e.prev=r&&r.e)}function kr(e,r,a){var l=e==null?"":""+e;return l===""?null:l}function Tr(e,r){return e==null?null:String(e)}function Mr(e,r,a,l,t,s){var n=e.__className;if(k||n!==a||n===void 0){var u=kr(a);(!k||u!==e.getAttribute("class"))&&(u==null?e.removeAttribute("class"):e.className=u),e.__className=a}return s}function Ar(e,r,a,l){var t=e.__style;if(k||t!==r){var s=Tr(r);(!k||s!==e.getAttribute("style"))&&(s==null?e.removeAttribute("style"):e.style.cssText=s),e.__style=r}return l}const Er=Symbol("is custom element"),Sr=Symbol("is html");function Te(e){if(k){var r=!1,a=()=>{if(!r){if(r=!0,e.hasAttribute("value")){var l=e.value;R(e,"value",null),e.value=l}if(e.hasAttribute("checked")){var t=e.checked;R(e,"checked",null),e.checked=t}}};e.__on_r=a,sr(a),De()}}function R(e,r,a,l){var t=Ir(e);k&&(t[r]=e.getAttribute(r),r==="src"||r==="srcset"||r==="href"&&e.nodeName==="LINK")||t[r]!==(t[r]=a)&&(r==="loading"&&(e[nr]=a),a==null?e.removeAttribute(r):typeof a!="string"&&Cr(e).includes(r)?e[r]=a:e.setAttribute(r,a))}function Ir(e){return e.__attributes??(e.__attributes={[Er]:e.nodeName.includes("-"),[Sr]:e.namespaceURI===or})}var Me=new Map;function Cr(e){var r=Me.get(e.nodeName);if(r)return r;Me.set(e.nodeName,r=[]);for(var a,l=e,t=Element.prototype;t!==l;){a=vr(l);for(var s in a)a[s].set&&r.push(s);l=ir(l)}return r}function Nr(e,r,a=r){var l=ur();ne(e,"input",t=>{var s=t?e.defaultValue:e.value;if(s=ae(e)?te(s):s,a(s),l&&s!==(s=r())){var n=e.selectionStart,u=e.selectionEnd;e.value=s??"",u!==null&&(e.selectionStart=n,e.selectionEnd=Math.min(u,e.value.length))}}),(k&&e.defaultValue!==e.value||dr(r)==null&&e.value)&&a(ae(e)?te(e.value):e.value),Ce(()=>{var t=r();ae(e)&&t===te(e.value)||e.type==="date"&&!t&&!e.value||t!==e.value&&(e.value=t??"")})}const re=new Set;function Lr(e,r,a,l,t=l){var s=a.getAttribute("type")==="checkbox",n=e;let u=!1;if(r!==null)for(var v of r)n=n[v]??(n[v]=[]);n.push(a),ne(a,"change",()=>{var i=a.__value;s&&(i=Ae(n,i,a.checked)),t(i)},()=>t(s?[]:null)),Ce(()=>{var i=l();if(k&&a.defaultChecked!==a.checked){u=!0;return}s?(i=i||[],a.checked=i.includes(a.__value)):a.checked=Ne(a.__value,i)}),cr(()=>{var i=n.indexOf(a);i!==-1&&n.splice(i,1)}),re.has(n)||(re.add(n),pe(()=>{n.sort((i,o)=>i.compareDocumentPosition(o)===4?-1:1),re.delete(n)})),pe(()=>{if(u){var i;if(s)i=Ae(n,i,a.checked);else{var o=n.find(f=>f.checked);i=o==null?void 0:o.__value}t(i)}})}function Ae(e,r,a){for(var l=new Set,t=0;t<e.length;t+=1)e[t].checked&&l.add(e[t].__value);return a||l.delete(r),Array.from(l)}function ae(e){var r=e.type;return r==="number"||r==="range"}function te(e){return e===""?null:+e}function Re(e,r,a){if(e.multiple)return Rr(e,r);for(var l of e.options){var t=$(l);if(Ne(t,r)){l.selected=!0;return}}(!a||r!==void 0)&&(e.selectedIndex=-1)}function Dr(e,r){Le(()=>{var a=new MutationObserver(()=>{var l=e.__value;Re(e,l)});return a.observe(e,{childList:!0,subtree:!0,attributes:!0,attributeFilter:["value"]}),()=>{a.disconnect()}})}function Pr(e,r,a=r){var l=!0;ne(e,"change",t=>{var s=t?"[selected]":":checked",n;if(e.multiple)n=[].map.call(e.querySelectorAll(s),$);else{var u=e.querySelector(s)??e.querySelector("option:not([disabled])");n=u&&$(u)}a(n)}),Le(()=>{var t=r();if(Re(e,t,l),l&&t===void 0){var s=e.querySelector(":checked");s!==null&&(t=$(s),a(t))}e.__value=t,l=!1}),Dr(e)}function Rr(e,r){for(var a of e.options)a.selected=~r.indexOf($(a))}function $(e){return"__value"in e?e.__value:e.value}function qr(){return Array.from({length:100},(e,r)=>{const a=r+1;if(a===1)return 0;if(a===100)return 2e5;const l=50*a**3+5025*a**2+168324*a+843e3;return Math.floor(l/600)})}const se=qr();function Or(e,r=se){const a=r.findIndex(l=>e<l);return a===-1?100:a}function Hr(e,r,a,l,t,s,n,u){let v=0;if(v+=Math.min(e*6e3,5e4),v+=Math.min(r*100,1e4),u!==0){let o=0,f=u/2e4;o+=Math.floor(a/f);let c=u*1.05/2e4;o+=Math.floor(l/c),v+=Math.min(o,6e4)}let i=0;return i+=Math.floor(t/180),i+=Math.floor(s/45),v+=Math.min(i,9e4),v+=n*2e3,v}var Br=J('<label class="relative cursor-pointer flex flex-col items-center min-w-[60px]"><input type="radio" name="tower" class="sr-only"> <div></div> <span class="text-xs text-center mt-1 text-gray-600 truncate w-14"> </span></label>'),Gr=J('<div class="text-center text-gray-400 text-xs">Loading towers...</div>'),jr=J('<div class="flex flex-col"><div class="flex items-center gap-1"><label class="text-xs font-medium text-gray-600"> </label> <span class="group relative"><svg class="w-3 h-3 text-gray-400 cursor-pointer" fill="none" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24"><circle cx="12" cy="12" r="10"></circle><path d="M12 16v-4M12 8h.01"></path></svg> <div class="absolute z-10 hidden group-hover:block bg-black text-white text-xs rounded p-2 w-40 left-1/2 -translate-x-1/2 mt-1 shadow-lg"> </div></span></div> <input type="number" class="mt-1 px-2 py-1 border border-gray-200 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-200 text-xs bg-gray-50"></div>'),Vr=J('<div class="min-h-screen bg-gradient-to-br from-blue-50 to-gray-100 p-2 md:p-6 flex items-center justify-center"><div class="flex flex-col w-full max-w-5xl mx-auto gap-4 md:flex-row"><div class="md:w-1/2 bg-white/90 rounded-xl shadow-lg p-3 md:p-5 border border-gray-200 flex flex-col gap-3"><h2 class="text-lg md:text-xl font-semibold mb-2 text-blue-700 flex items-center gap-2">Tower & Parameters</h2> <div><h3 class="text-xs font-medium mb-1 text-gray-700">Select Tower</h3> <div class="flex gap-2 overflow-x-auto py-2"><!></div></div> <form class="grid grid-cols-1 md:grid-cols-2 gap-2"><div class="flex flex-col"><label for="difficulty" class="text-xs font-medium text-gray-600 mb-1">Difficulty</label> <select class="px-2 py-1 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-300 text-xs bg-white" id="difficulty" name="difficulty"><option>Easy</option><option>Medium</option><option>Hard</option><option>Impoppable</option></select></div> <!></form></div> <div class="md:w-1/2 bg-white/90 rounded-xl shadow-lg p-3 md:p-5 border border-gray-200 flex flex-col gap-3 justify-between"><div><h2 class="text-lg md:text-xl font-semibold mb-2 text-blue-700 flex items-center gap-2">Calculation Results</h2> <div class="p-3 bg-gradient-to-r from-blue-100 to-blue-50 rounded-lg border border-blue-200 mb-2 flex flex-col items-center"><div class="text-base font-medium text-blue-700">Estimated Degree</div> <div class="text-3xl font-extrabold text-blue-600 tracking-tight"> </div></div> <div class="grid grid-cols-2 gap-2 mb-2"><div class="p-2 bg-gray-50 rounded-lg border border-gray-200 flex flex-col items-center"><div class="text-xs font-medium text-gray-500">Current Power</div> <div class="text-lg font-semibold text-gray-700"> </div></div> <div class="p-2 bg-gray-50 rounded-lg border border-gray-200 flex flex-col items-center"><div class="text-xs font-medium text-gray-500">Progress to Next</div> <div class="text-lg font-semibold text-gray-700"> </div></div></div></div></div></div></div>');function Jr(e,r){fr(r,!0);const a=[],l=[{key:"tier5Towers",label:"Tier 5 Towers",min:0,max:999,tooltip:"Tier 5 Towers (excluding initial 3)."},{key:"upgrades",label:"Upgrades",min:0,max:999,tooltip:"All upgrade tiers spent on towers excluding Tier 5s. Max 100."},{key:"popCount",label:"Pop Count",min:0,max:162e5,tooltip:"Bloons popped from every tower of the paragon type. Max 16.2M."},{key:"cashSpent",label:"Cash Spent",min:0,max:5e6,tooltip:"Total spent on towers excluding T5s. Max $5,000,000."},{key:"cashGenerated",label:"Cash Generated",min:0,max:405e4,tooltip:"Buccaneer & Engineer only. Max $4.05M."},{key:"cashInjections",label:"Cash Injections",min:0,max:1e7,tooltip:"Allowed cash injection for the paragon. 3.15x base cost."},{key:"powerTotems",label:"Power Totems",min:0,max:999,tooltip:"No max cap for paragon power."}];let t=W({selectedTower:1,difficulty:"easy",tier5Towers:0,upgrades:0,cashSpent:0,cashGenerated:0,cashInjections:0,popCount:0,powerTotems:0}),s=xe(W([])),n=xe(W({level:0,currDegree:0,nextDegree:0}));function u(){const b=m(s).find(P=>P.id===t.selectedTower);if(!b)return{level:0,currDegree:0,nextDegree:0};const y=Hr(t.tier5Towers,t.upgrades,t.cashSpent,t.cashInjections,t.popCount,t.cashGenerated,t.powerTotems,b.prices[t.difficulty]),N=Or(y,se);return{level:N,currDegree:y,nextDegree:se[N]}}_r(()=>{he(n,u(),!0)}),xr(()=>{fetch("/json/paragons.json").then(b=>b.json()).then(b=>he(s,b,!0)).catch(console.error)});var v=Vr(),i=_(v),o=_(i),f=x(_(o),2),c=x(_(f),2),h=_(c);{var p=b=>{var y=Ge(),N=mr(y);we(N,17,()=>m(s),ye,(P,A)=>{var j=Br(),L=_(j);Te(L);var V,U=x(L,2),S=x(U,2),X=_(S,!0);g(S),g(j),ee(()=>{V!==(V=m(A).id)&&(L.value=(L.__value=m(A).id)??""),Ar(U,`background-image: url(${m(A).image??""});`),Mr(U,1,`w-12 h-12 md:w-14 md:h-14 bg-center bg-contain bg-no-repeat rounded-lg border-2 transition-all duration-150 ${t.selectedTower===m(A).id?"border-blue-500 ring-2 ring-blue-200 scale-105":"border-gray-200 hover:border-blue-300"}`),O(X,m(A).name)}),Lr(a,[],L,()=>(m(A).id,t.selectedTower),Be=>t.selectedTower=Be),Y(P,j)}),Y(b,y)},E=b=>{var y=Gr();Y(b,y)};pr(h,b=>{m(s).length>0?b(p):b(E,!1)})}g(c),g(f);var T=x(f,2),d=_(T),w=x(_(d),2),I=_(w);I.value=I.__value="easy";var C=x(I);C.value=C.__value="medium";var M=x(C);M.value=M.__value="hard";var H=x(M);H.value=H.__value="impoppable",g(w),g(d);var B=x(d,2);we(B,17,()=>l,ye,(b,y)=>{var N=jr(),P=_(N),A=_(P),j=_(A,!0);g(A);var L=x(A,2),V=x(_(L),2),U=_(V,!0);g(V),g(L),g(P);var S=x(P,2);Te(S),g(N),ee(()=>{R(A,"for",m(y).key),O(j,m(y).label),O(U,m(y).tooltip),R(S,"id",m(y).key),R(S,"min",m(y).min),R(S,"max",m(y).max),R(S,"placeholder",m(y).label)}),Nr(S,()=>t[m(y).key],X=>t[m(y).key]=X),Y(b,N)}),g(T),g(o);var q=x(o,2),F=_(q),G=x(_(F),2),oe=x(_(G),2),qe=_(oe,!0);g(oe),g(G);var ie=x(G,2),K=_(ie),ve=x(_(K),2),Oe=_(ve,!0);g(ve),g(K);var ce=x(K,2),ue=x(_(ce),2),He=_(ue,!0);g(ue),g(ce),g(ie),g(F),g(q),g(i),g(v),ee((b,y)=>{O(qe,m(n).level),O(Oe,b),O(He,y)},[()=>m(n).currDegree.toLocaleString(),()=>m(n).nextDegree.toLocaleString()]),Pr(w,()=>t.difficulty,b=>t.difficulty=b),Y(e,v),gr()}export{Jr as component};
